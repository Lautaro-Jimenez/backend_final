<nav class="navbar navbar-expand-lg bg-dark flex-column">
    <div class="container py-1 ">
        <div class="container-fluid d-flex justify-content-between">
            <a class="navbar-brand text-bg-dark" href="/products">E-commerce - Tu tienda online</a>
            <a class="btn btn-danger" href="/session/logout"><i class="bi bi-x-circle-fill"></i> Logout</a>
        </div>
    </div>
</nav>
<div class="navbar navbar-expand-lg bg-light mb-3">
    <div class="container d-flex align-items-baseline">
        <p><strong>Bienvenido</strong> {{user.name}}, su rol es {{user.role}}</p>
        <div class="navbar-nav d-flex justify-content-between">
            {{#if isAdmin}}
                <a class="nav-link" href="/addProduct">Add Product</a>
                <a class="nav-link" href="/admin_panel">Admin Panel</a>
            {{/if}}
            {{#if isPremium}}
                <a class="nav-link" href="/addProduct">Add Product</a>
                <a class="nav-link" href="/premium">Premium</a>
                <a class="nav-link" href="/user/{{user.id}}">Profile</a>
                <a class="nav-link" href="/carts/{{user.cart}}"><i class="bi bi-cart"></i></a>
            {{/if}}
            {{#if isUser}}
                <a class="nav-link" href="/premium">Premium</a>
                <a class="nav-link" href="/user/{{user.id}}">Profile</a>
                <a class="nav-link" id="cart" cid="{{user.cart}}" href="/carts/{{user.cart}}"><i class="bi bi-cart"></i></a>
            {{/if}}
        </div>
    </div>
</div>

<div class="container pb-2">
    <h3>Lista de productos </h3>
    <table class="table">
        <thead class="table-dark">
            <tr>
                <th scope="col">Title</th>
                <th scope="col">Description</th>
                <th scope="col">Code</th>
                <th scope="col">Price</th>
                <th scope="col">Stock</th>
                <th scope="col">Category</th>
                <th scope="col" colspan="2">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{#each products.docs}}
                <tr>
                    <td> {{this.title}}         </td>
                    <td> {{this.description}}   </td>
                    <td> {{this.code}}          </td>
                    <td> {{this.price}} ARS     </td>
                    <td> {{this.stock}}         </td>
                    <td> {{this.category}}      </td>
                    <td> <a href="/products/{{this.id}}" class="btn btn-dark deleteButton"><i class="bi bi-info-circle"></i> More info</a></td>
                </tr>
            {{/each}}
        </tbody>
    </table>
    <div class="d-inline-flex flex-direction-row justify-content-center align-self-center">
        {{#if products.hasPrevPage}}
            <button type="button" onClick="prevPage()" class="btn btn-primary mx-3">&#60; Previous</button>
        {{/if}}
        <span class="lead mx-3" id="page">{{products.page}}</span>
        {{#if products.hasNextPage}}
            <button type="button" onClick="nextPage()" class="btn btn-primary mx-3">Next &#62;</button>
        {{/if}}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="./static/js/fetch_request.js"></script>
    <script src="./static/js/main.js"></script>
</div>
